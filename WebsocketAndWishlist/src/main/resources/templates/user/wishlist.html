<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{user/layout-user.html}"
<head>
<meta charset="UTF-8">
<title>Danh sách yêu thích</title>
<style>
.wishlist-section {
	background: #f8f9fa;
	padding: 80px 0;
	min-height: 80vh;
}

.wishlist-card {
	background: #fff;
	border-radius: 12px;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
	transition: all 0.25s ease-in-out;
	overflow: hidden;
}

.wishlist-card:hover {
	transform: translateY(-5px);
	box-shadow: 0 4px 14px rgba(0, 0, 0, 0.12);
}

.wishlist-card img {
	width: 100%;
	height: 260px;
	object-fit: cover;
}

.wishlist-info {
	padding: 15px 18px 20px;
}

.wishlist-title {
	font-weight: 600;
	font-size: 16px;
	color: #333;
	text-overflow: ellipsis;
	overflow: hidden;
	white-space: nowrap;
}

.wishlist-price {
	color: #e74c3c;
	font-size: 17px;
	font-weight: 600;
	margin-top: 5px;
}

.wishlist-buttons {
	margin-top: 15px;
}

.wishlist-btn {
	border: 1px solid #007bff;
	color: #007bff;
	padding: 6px 14px;
	border-radius: 25px;
	font-size: 14px;
	transition: all 0.2s;
}

.wishlist-btn:hover {
	background: #007bff;
	color: white;
}

.wishlist-remove {
	color: #ff4d4d;
	font-size: 15px;
	cursor: pointer;
	transition: color 0.2s;
}

.wishlist-remove:hover {
	color: #d21f1f;
}

.empty-wishlist {
	text-align: center;
	padding: 100px 0;
}

.empty-wishlist img {
	width: 200px;
	opacity: 0.8;
}

.empty-wishlist h4 {
	color: #555;
	margin-top: 20px;
	font-weight: 500;
}

.wishlist-header {
	text-align: center;
	margin-bottom: 40px;
}

.wishlist-header h2 {
	font-size: 28px;
	font-weight: 700;
	color: #333;
	position: relative;
	display: inline-block;
}

.wishlist-header h2::after {
	content: "";
	position: absolute;
	bottom: -10px;
	left: 50%;
	transform: translateX(-50%);
	width: 60%;
	height: 3px;
	background: #007bff;
	border-radius: 3px;
}
</style>
</head>
<body>
	<div layout:fragment="content">
		<section class="wishlist-section">
			<div class="container">
				<div class="wishlist-header">
					<h2>❤️ Danh sách yêu thích của bạn</h2>
					<p class="mt-3 text-muted">Lưu lại những sản phẩm bạn yêu thích
						để xem hoặc mua sau</p>
				</div>

				<!-- Nếu rỗng -->
				<div class="empty-wishlist" th:if="${#lists.isEmpty(items)}">
					<img th:src="@{/images/empty-heart.png}" alt="empty">
					<h4>Bạn chưa thêm sản phẩm nào vào danh sách yêu thích.</h4>
					<a th:href="@{/getproduct}" class="wishlist-btn mt-3">Khám phá
						ngay</a>
				</div>

				<!-- Nếu có sản phẩm -->
				<div class="row" th:unless="${#lists.isEmpty(items)}">
					<div class="col-md-4 col-lg-3 p-b-30" th:each="item : ${items}">
						<div class="wishlist-card">
							<img th:src="@{/images/product-default.jpg}" alt="IMG-PRODUCT">
							<div class="wishlist-info">
								<div class="wishlist-title"
									th:text="'Sản phẩm #' + ${item.productId}"></div>
								<div class="wishlist-price"
									th:text="'₫' + ${item.productId * 10000}">₫120,000</div>

								<div
									class="wishlist-buttons d-flex justify-content-between align-items-center">
									<a th:href="@{'/product-detail/' + ${item.productDetailId}}"
										class="wishlist-btn">Xem chi tiết</a> <i
										class="zmdi zmdi-delete wishlist-remove"
										title="Xóa khỏi danh sách"></i>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</section>
	</div>

	<script th:inline="javascript">
    /* <![CDATA[ */
    $(document).ready(function() {
        $(".wishlist-remove").click(function() {
            const card = $(this).closest(".col-md-4");
            swal({
                title: "Xác nhận",
                text: "Bạn có chắc muốn xóa sản phẩm này khỏi danh sách yêu thích?",
                icon: "warning",
                buttons: ["Hủy", "Xóa"],
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    card.fadeOut(300, function() {
                        $(this).remove();
                    });
                    swal("Đã xóa khỏi danh sách!", {
                        icon: "success",
                    });
                }
            });
        });
    });
    /* ]]> */
</script>
</body>
</html>
